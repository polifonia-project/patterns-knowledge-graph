Plan:

1. Change our pattern URI to a more informative one, eg:  
  * http://w3id.org/polifonia/resource/pattern/fonn/diatonic/accent/5_2_1_6
  * http://w3id.org/polifonia/resource/pattern/fonn/diatonic/note/5_2_1_6
2. Test all queries
3. Update README with examples of output, and script usage
4. Upload to disi server for testing with Pattern UI
5. Check output more carefully - capitalisation, spaces, commas, accented characters 
6. What to do with 'prov'?



Notes:

The following relations exist in TUNES:

<http://w3id.org/polifonia/ontology/jams/beatsDuration>
<http://w3id.org/polifonia/ontology/jams/hasPatternComplexity>
<http://w3id.org/polifonia/ontology/jams/hasPatternLocation>
<http://w3id.org/polifonia/ontology/jams/hasPatternType>
<http://w3id.org/polifonia/ontology/jams/includesObservation>
<http://w3id.org/polifonia/ontology/jams/isJAMSAnnotationOf>
<http://w3id.org/polifonia/ontology/jams/jamsVersion>
<http://w3id.org/polifonia/ontology/jams/key>
<http://w3id.org/polifonia/ontology/jams/ofPattern>
<http://w3id.org/polifonia/ontology/jams/release>
<http://w3id.org/polifonia/ontology/jams/timeSignature>
<http://w3id.org/polifonia/ontology/jams/tuneContent>
<http://w3id.org/polifonia/ontology/jams/tuneFamily>
<http://w3id.org/polifonia/ontology/jams/tuneId>
<http://w3id.org/polifonia/ontology/jams/tuneType>
<http://w3id.org/polifonia/ontology/music-meta/title>
<http://www.w3.org/ns/prov#wasDerivedFrom>
<http://www.w3.org/ns/prov#wasMemberOf>
<http://w3id.org/polifonia/ontology/core/description>
<http://w3id.org/polifonia/ontology/core/hasMember>
<http://w3id.org/polifonia/ontology/core/hasPart>
<http://w3id.org/polifonia/ontology/core/id>
<http://w3id.org/polifonia/ontology/core/isMemberOf>
<http://w3id.org/polifonia/ontology/core/title>
<http://w3id.org/polifonia/ontology/music-meta/hasFormType>
<http://w3id.org/polifonia/ontology/music-meta/isRealisedIn>
<http://w3id.org/polifonia/ontology/core/name>
<http://w3id.org/polifonia/ontology/core/isDefinedBy>
rdf:type
rdfs:label


Collection concepts:

<http://w3id.org/polifonia/resource/tunes/CollectionConcept/Tune>
        a           core:CollectionConcept ;
        rdfs:label  "Melodies that belong to the same Tune as conceptualized in The Session." .

<http://w3id.org/polifonia/resource/tunes/CollectionConcept/TuneFamily>
        a           core:CollectionConcept ;
        rdfs:label  "Melodies that belong to the same tune family." .


Form types, just a few:

<http://w3id.org/polifonia/resource/tunes/thesession20211212/FormType/jig>
        a          mm:FormType ;
        core:name  "jig" .

Tunes (40k):

<http://w3id.org/polifonia/resource/tunes/thesession20211212/Tune/4335>
        a                 core:Collection ;
        core:description  "https://thesession.org/tunes/4335" ;
        core:id           "4335" ;
        core:isDefinedBy  <http://w3id.org/polifonia/resource/tunes/CollectionConcept/Tune> ;
        core:name         "Beech Tree, The" .

Entities (AbstractScore, Score, MusicEntity):

<http://w3id.org/polifonia/resource/tunes/thesession20211212/MusicEntity/18576/AbstractScore>
        rdf:type         mm:AbstractScore ;
        mm:isRealisedIn  <http://w3id.org/polifonia/resource/tunes/thesession20211212/MusicEntity/18576/Score> .

<http://w3id.org/polifonia/resource/tunes/thesession20211212/MusicEntity/7829/Score>
        rdf:type    mm:Score ;
        core:id     "7829" ;
        core:title  "Lady's Well, The" .

<http://w3id.org/polifonia/resource/tunes/thesession20211212/MusicEntity/33129>
        rdf:type          mm:MusicEntity ;
        rdfs:label        "Train Journey North, The" ;
        core:description  "https://thesession.org/tunes/11638#setting33129" ;
        core:hasPart      <http://w3id.org/polifonia/resource/tunes/thesession20211212/MusicEntity/33129/AbstractScore> ;
        core:id           "33129" ;
        core:isMemberOf   <http://w3id.org/polifonia/resource/tunes/thesession20211212/Tune/11638> , <http://w3id.org/polifonia/resource/tunes/Collection/thesession20211212> ;
        core:title        "Train Journey North, The" ;
        mm:hasFormType    <http://w3id.org/polifonia/resource/tunes/thesession20211212/FormType/hornpipe> .


compare (from Patterns):

<http://w3id.org/polifonia/resource/MusicalComposition/29318d2d8c8d2faebfb1e1560fb208c57681d91a>
        rdf:type            mm:MusicEntity ;
        core:isMemberOf     <http://w3id.org/polifonia/resource/tunefamily/Drowsy%20Maggie> ;
        jams:beatsDuration  "34.0"^^xsd:double ;
        jams:timeSignature  <http://w3id.org/polifonia/resource/timesig/4_4> ;
        jams:tuneContent    " X:27 T:Drowsy Maggie 27 Z:Jeremy S:thesession.org R:reel |:E2BE dEBE|E2BE AFDF|E2BE dEBE|BABc dAFD:| d2fd c2ec|defg afge|d2fd c2ec|BABc dAFA| d2fd c2ec|defg afge|afge fdec|BABc dAFD| " ;
        mm:FormType         <http://w3id.org/polifonia/resource/tunetype/reel> ;
        mm:hasKey           <http://w3id.org/polifonia/resource/key/Edorian> .


But there is an inconsistency here: we are using NLB072255_01, but the id here is just 72255:

<http://w3id.org/polifonia/resource/tunes/MTC-FS-INST-2.0/MusicEntity/72255/Stanza/1>
        rdf:type          mm:Stanza , mm:CompositionPart ;
        rdfs:label        "1" ;
        core:description  "https://www.liederenbank.nl/liedpresentatie.php?zoek=72255&lan=en" ;
        core:id           "NLB072255_01" ;
        core:isPartOf     <http://w3id.org/polifonia/resource/tunes/MTC-FS-INST-2.0/MusicEntity/72255/AbstractScore> ;
        mm:isRealisedIn   <http://w3id.org/polifonia/resource/tunes/MTC-FS-INST-2.0/MusicEntity/72255/Score> .



Issues from Giulia:

* Index - list of tunes - done, but check that every tune now has a label - should be in the TUNES KG
* Card - text - find_metadata_given_tune.sparql returns weird results for timesig and key - URIs seem wrong - done - but give the timesig name
* Card - link - find_corpus_given_tune.sparql 
* 
* Provide 200 words describing the data for portal front page


Discussion with PVK about URIs. Examples:

MTC-FS-INST-2.0/NLBxxxxxx_yy
thesession/12345
rism/id_number
cre/
kolberg/
easmes/ # early american sources manuscripts from europe same as rism but books in USA
essen/deutsch12345

URIs:

tunes:TuneFamily
mm:MusicEntity

/resource/tunes/<corpusname>/<classname>/<id>

eg 
/resource/tunes/thesession/TuneFamily/Drowsy_Maggie is distinct from:
/resource/tunes/thesession/MusicEntity/Drowsy_Maggie



Future work:

I could re-do The Session using all the fields, including annotator and setting versus tune ID 

X: 2
T: Johnny An Gabha
Z: ceolachan
S: https://thesession.org/tunes/4763#setting17245
R: polka
M: 2/4
L: 1/8
K: Gmaj
|:d/B/|G>A B/c/d|ed Bd|ed ef|ed B/c/d/B/|
G2 BG/B/|ed Bd|e>d ef|ag g:|
|:B/d/|g2 f2|e>d Bd|ed ef|ed B/c/d|
g2 GB/d/|e/f/e/d/ Bd|e/f/e/d/ e>f|ag g:|

Then just use Danny's metadata on tune families to add more families


Add a section to readme to show an example of the output ttl

* The URI we mint for a musical composition is eg:
  * http://w3id.org/polifonia/resource/MusicalComposition/TheSession/27
* (We previously used SHA for these URIs, as below, but it seems unnecessary
  * http://w3id.org/polifonia/resource/MusicalComposition/29318d2d8c8d2faebfb1e1560fb208c57681d91a)
* The URI we mint for a pattern is eg:
  * http://w3id.org/polifonia/resource/pattern/fonn/diatonic/accent/5_2_1_6
  * http://w3id.org/polifonia/resource/pattern/fonn/diatonic/note/5_2_1_6
* The `pattern-type` is a string, eg:
  * `URI jams:hasPatternType "feature='diatonic scale degree', level='accent', n_vals=4" ;`

